<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì°¬ì–‘íŒ€ ìŠ¤ì¼€ì¤„ë§ ì•±</title>
    <style>
        body { font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif; background-color: #f4f6f8; text-align: center; padding-top: 60px; margin: 0; }
        .container { background: white; max-width: 90%; margin: 0 auto; padding: 40px 20px; border-radius: 16px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        .icon { font-size: 40px; margin-bottom: 15px; }
        h2 { color: #1a1a1a; font-size: 22px; margin-top: 0; margin-bottom: 15px; }
        p { color: #666; font-size: 15px; line-height: 1.6; margin-bottom: 30px; word-break: keep-all; }
        .btn { display: inline-block; background: #4a90e2; color: white; text-decoration: none; padding: 15px 20px; border-radius: 10px; font-weight: bold; width: 100%; box-sizing: border-box; cursor: pointer; border: none; font-size: 16px; margin-bottom: 12px; transition: 0.2s; }
        .btn-secondary { background: #333; }
        .btn:active { transform: scale(0.98); }
        
        /* ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ */
        .loader { border: 4px solid #f3f3f3; border-top: 4px solid #4a90e2; border-radius: 50%; width: 30px; height: 30px; animation: spin 1s linear infinite; margin: 0 auto 20px auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div class="container">
        <div class="loader" id="loading-spinner"></div>
        <div class="icon" id="status-icon" style="display:none;">âš ï¸</div>
        
        <h2>ì•± ì ‘ì† ì•ˆë‚´</h2>
        <p id="status-text">ì•ˆì „í•œ í™˜ê²½ìœ¼ë¡œ ì´ë™ ì¤‘ì…ë‹ˆë‹¤...<br>ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.</p>
        
        <a href="#" id="manual-btn" class="btn" style="display:none;">ğŸ‘‰ ì•±ìœ¼ë¡œ ë°”ë¡œ ì…ì¥í•˜ê¸°</a>
        <button onclick="copyLink()" class="btn btn-secondary">ğŸ”— ì•± ë§í¬ ë³µì‚¬í•˜ê¸°</button>
    </div>

    <script>
        // ğŸš¨ ì—¬ê¸°ì— ë³¸ì¸ì˜ 'êµ¬ê¸€ ì•±ìŠ¤ ìŠ¤í¬ë¦½íŠ¸ ì›¹ ì•± ì£¼ì†Œ'ë¥¼ ë„£ìœ¼ì„¸ìš”! ğŸš¨
        var googleAppUrl = "https://script.google.com/macros/s/AKfycbxB-DT1nAzEVyrUFTt5VKLaAgu9JevhVinNACtgPqML/exec";
        
        // ìˆ˜ë™ ë²„íŠ¼ì— êµ¬ê¸€ ì£¼ì†Œ ì—°ê²°
        document.getElementById('manual-btn').href = googleAppUrl;

        function copyLink() {
            var tempInput = document.createElement("input");
            tempInput.value = googleAppUrl;
            document.body.appendChild(tempInput);
            tempInput.select();
            document.execCommand("copy");
            document.body.removeChild(tempInput);
            alert("âœ… ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!\nì¸í„°ë„· ì£¼ì†Œì°½(Safari/Chrome)ì— ë¶™ì—¬ë„£ê¸° í•´ì£¼ì„¸ìš”.");
        }

        var ua = navigator.userAgent.toLowerCase();
        var isKakao = ua.indexOf('kakaotalk') > -1;
        var isAndroid = ua.indexOf('android') > -1;
        var isIOS = ua.match(/(iphone|ipod|ipad)/);

        // UIë¥¼ ë³€ê²½í•˜ì—¬ ë²„íŠ¼ì„ ë³´ì—¬ì£¼ëŠ” í•¨ìˆ˜ (ìë™ ì „í™˜ ì‹¤íŒ¨ ëŒ€ë¹„)
        function showManualOptions() {
            document.getElementById('loading-spinner').style.display = 'none';
            document.getElementById('status-icon').style.display = 'block';
            document.getElementById('status-text').innerHTML = "ì• í”Œ(Safari) ë³´ì•ˆ ì •ì±…ì´ë‚˜ ì¹´ì¹´ì˜¤í†¡ í™˜ê²½ìœ¼ë¡œ ì¸í•´<br>ìë™ ì´ë™ì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.<br><br>ì•„ë˜ <b>[ì…ì¥í•˜ê¸°]</b> ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”!";
            document.getElementById('manual-btn').style.display = 'inline-block';
        }

        if (isKakao) {
            if (isAndroid) {
                // 1. ì•ˆë“œë¡œì´ë“œ ì¹´ì¹´ì˜¤í†¡ -> í¬ë¡¬ ê°•ì œ ì í”„
                var urlWithoutHttp = googleAppUrl.replace(/^https?:\/\//i, '');
                window.location.href = 'intent://' + urlWithoutHttp + '#Intent;scheme=https;package=com.android.chrome;end';
            } else if (isIOS) {
                // 2. ì•„ì´í° ì¹´ì¹´ì˜¤í†¡ -> ì™¸ë¶€ ë¸Œë¼ìš°ì €(Safari) ê°•ì œ ì í”„
                window.location.href = 'kakaotalk://web/openExternal?url=' + encodeURIComponent(googleAppUrl);
            }
            // ê°•ì œ ì í”„ê°€ ì‹¤í–‰ë  ì‹œê°„ì„ ì£¼ê³ , ê·¸ë˜ë„ í™”ë©´ì— ë‚¨ì•„ìˆë‹¤ë©´ ë²„íŠ¼ ë„ìš°ê¸°
            setTimeout(showManualOptions, 1500);
            
        } else {
            // 3. ì¹´ì¹´ì˜¤í†¡ì´ ì•„ë‹Œ ì¼ë°˜ ë¸Œë¼ìš°ì €(PC í¬ë¡¬, ëª¨ë°”ì¼ Safari ë“±)
            // ì‚¬íŒŒë¦¬ëŠ” ë°”ë¡œ ì´ë™í•˜ë©´ íŠ•ê²¨ë‚¼ ìˆ˜ ìˆìœ¼ë¯€ë¡œ 0.5ì´ˆ ë”œë ˆì´ í›„ ëŒ€ì²´(replace) ì´ë™
            setTimeout(function() {
                window.location.replace(googleAppUrl);
            }, 500);
            
            // í˜¹ì‹œë¼ë„ ì‚¬íŒŒë¦¬ê°€ ì°¨ë‹¨í•´ì„œ 1.5ì´ˆ í›„ì—ë„ ì´ í™”ë©´ì— ë‚¨ì•„ìˆë‹¤ë©´ ë²„íŠ¼ í‘œì‹œ
            setTimeout(showManualOptions, 1500);
        }
    </script>
</body>
</html>
